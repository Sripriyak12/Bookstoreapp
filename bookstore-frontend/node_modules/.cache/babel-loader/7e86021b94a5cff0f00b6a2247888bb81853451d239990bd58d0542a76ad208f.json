{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./BookList.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookList(){const[books,setBooks]=useState([]);const navigate=useNavigate();const userId=localStorage.getItem(\"userId\");// Dynamically pulled from storage\nuseEffect(()=>{axios.get('/api/books').then(res=>setBooks(res.data)).catch(()=>alert(\"Failed to load books\"));},[]);const addToCart=async bookId=>{const storedUserId=localStorage.getItem(\"userId\");if(!storedUserId||storedUserId===\"undefined\"||storedUserId===\"null\"){alert(\"Please log in to add books to your cart.\");navigate('/login');return;}try{await axios.post('/api/cart/add',null,{params:{userId:storedUserId,bookId:bookId,quantity:1}});alert('Book added to cart!');}catch(err){console.error(\"Add to Cart Error:\",err);alert('Failed to add book to cart.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-grid-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDCDA Browse Books\"}),/*#__PURE__*/_jsx(\"div\",{className:\"book-grid\",children:books.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"book-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.imageUrl||'https://via.placeholder.com/150',alt:book.title,className:\"book-img\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"book-title\",children:book.title}),/*#__PURE__*/_jsx(\"p\",{className:\"book-author\",children:book.author}),/*#__PURE__*/_jsxs(\"p\",{className:\"book-price\",children:[\"\\u20B9\",book.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>addToCart(book.id),children:\"\\uD83D\\uDED2 Add to Cart\"})]},book.id))})]});}export default BookList;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","BookList","books","setBooks","navigate","userId","localStorage","getItem","get","then","res","data","catch","alert","addToCart","bookId","storedUserId","post","params","quantity","err","console","error","className","children","map","book","src","imageUrl","alt","title","author","price","toFixed","onClick","id"],"sources":["C:/Users/sri/Downloads/bookstore-fullstack/bookstore-frontend/src/components/BookList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './BookList.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction BookList() {\r\n  const [books, setBooks] = useState([]);\r\n  const navigate = useNavigate();\r\n  const userId = localStorage.getItem(\"userId\"); // Dynamically pulled from storage\r\n\r\n  useEffect(() => {\r\n    axios.get('/api/books')\r\n      .then(res => setBooks(res.data))\r\n      .catch(() => alert(\"Failed to load books\"));\r\n  }, []);\r\n\r\n  const addToCart = async (bookId) => {\r\n  const storedUserId = localStorage.getItem(\"userId\");\r\n\r\n  if (!storedUserId || storedUserId === \"undefined\" || storedUserId === \"null\") {\r\n    alert(\"Please log in to add books to your cart.\");\r\n    navigate('/login');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await axios.post('/api/cart/add', null, {\r\n      params: {\r\n        userId: storedUserId,\r\n        bookId: bookId,\r\n        quantity: 1\r\n      }\r\n    });\r\n    alert('Book added to cart!');\r\n  } catch (err) {\r\n    console.error(\"Add to Cart Error:\", err);\r\n    alert('Failed to add book to cart.');\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"book-grid-container\">\r\n      <h2 className=\"mb-4\">ðŸ“š Browse Books</h2>\r\n      <div className=\"book-grid\">\r\n        {books.map(book => (\r\n          <div className=\"book-card\" key={book.id}>\r\n            <img\r\n              src={book.imageUrl || 'https://via.placeholder.com/150'}\r\n              alt={book.title}\r\n              className=\"book-img\"\r\n            />\r\n            <h5 className=\"book-title\">{book.title}</h5>\r\n            <p className=\"book-author\">{book.author}</p>\r\n            <p className=\"book-price\">â‚¹{book.price.toFixed(2)}</p>\r\n            <button className=\"btn btn-primary\" onClick={() => addToCart(book.id)}>\r\n              ðŸ›’ Add to Cart\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookList;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,gBAAgB,CACvB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAU,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAE;AAE/Cd,SAAS,CAAC,IAAM,CACdE,KAAK,CAACa,GAAG,CAAC,YAAY,CAAC,CACpBC,IAAI,CAACC,GAAG,EAAIP,QAAQ,CAACO,GAAG,CAACC,IAAI,CAAC,CAAC,CAC/BC,KAAK,CAAC,IAAMC,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAC/C,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,SAAS,CAAG,KAAO,CAAAC,MAAM,EAAK,CACpC,KAAM,CAAAC,YAAY,CAAGV,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAEnD,GAAI,CAACS,YAAY,EAAIA,YAAY,GAAK,WAAW,EAAIA,YAAY,GAAK,MAAM,CAAE,CAC5EH,KAAK,CAAC,0CAA0C,CAAC,CACjDT,QAAQ,CAAC,QAAQ,CAAC,CAClB,OACF,CAEA,GAAI,CACF,KAAM,CAAAT,KAAK,CAACsB,IAAI,CAAC,eAAe,CAAE,IAAI,CAAE,CACtCC,MAAM,CAAE,CACNb,MAAM,CAAEW,YAAY,CACpBD,MAAM,CAAEA,MAAM,CACdI,QAAQ,CAAE,CACZ,CACF,CAAC,CAAC,CACFN,KAAK,CAAC,qBAAqB,CAAC,CAC9B,CAAE,MAAOO,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,CAAEF,GAAG,CAAC,CACxCP,KAAK,CAAC,6BAA6B,CAAC,CACtC,CACF,CAAC,CAEC,mBACEb,KAAA,QAAKuB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClC1B,IAAA,OAAIyB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,2BAAe,CAAI,CAAC,cACzC1B,IAAA,QAAKyB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBtB,KAAK,CAACuB,GAAG,CAACC,IAAI,eACb1B,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB1B,IAAA,QACE6B,GAAG,CAAED,IAAI,CAACE,QAAQ,EAAI,iCAAkC,CACxDC,GAAG,CAAEH,IAAI,CAACI,KAAM,CAChBP,SAAS,CAAC,UAAU,CACrB,CAAC,cACFzB,IAAA,OAAIyB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEE,IAAI,CAACI,KAAK,CAAK,CAAC,cAC5ChC,IAAA,MAAGyB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEE,IAAI,CAACK,MAAM,CAAI,CAAC,cAC5C/B,KAAA,MAAGuB,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,QAAC,CAACE,IAAI,CAACM,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,cACtDnC,IAAA,WAAQyB,SAAS,CAAC,iBAAiB,CAACW,OAAO,CAAEA,CAAA,GAAMpB,SAAS,CAACY,IAAI,CAACS,EAAE,CAAE,CAAAX,QAAA,CAAC,0BAEvE,CAAQ,CAAC,GAXqBE,IAAI,CAACS,EAYhC,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAlC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}